import G from"./Icon.6d0b675b.js";import{u as J,r as M,n as H,c as f,a as r,b as R,t as A,s as d,Q as K,F as W,q as X,o as v,x as Y}from"./entry.f5e3853e.js";import{F as Z,f as x,m as ee,I as E,o as O,a as h,i as te,S as k,w as se,b as j,c as oe,d as ie}from"./index.594ac256.js";import"./index.b8fe2cb5.js";class b extends Z{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return x(super._frequencyToUnits(e))}_ticksToUnits(e){return x(super._ticksToUnits(e))}_beatsToUnits(e){return x(super._beatsToUnits(e))}_secondsToUnits(e){return x(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return ee(this.toMidi())}transpose(e){return new b(this.context,this.toMidi()+e)}}class g extends E{constructor(){super(O(g.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const e=O(g.getDefaults(),arguments,["voice","options"]);h(!te(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(E.getDefaults(),{maxPolyphony:32,options:{},voice:k})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}else se("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(o=>{const a=new b(this.context,o).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(o,t,s),this._activeVoices.push({midi:a,voice:i,released:!1}),this.log("triggerAttack",o,t))})}_triggerRelease(e,t){e.forEach(s=>{const o=new b(this.context,s).toMidi(),a=this._activeVoices.find(({midi:i,released:u})=>i===o&&!u);a&&(a.voice.triggerRelease(t),a.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,o){h(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,o):this._triggerRelease(t,s):this.context.setTimeout(()=>{this._scheduleEvent(e,t,s,o)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const o=this.toSeconds(t);return this._scheduleEvent("attack",e,o,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,o){const a=this.toSeconds(s);if(this.triggerAttack(e,a,o),j(t)){h(j(e),"If the duration is an array, the notes must also be an array"),e=e;for(let i=0;i<e.length;i++){const u=t[Math.min(i,t.length-1)],m=this.toSeconds(u);h(m>0,"The duration must be greater than 0"),this.triggerRelease(e[i],a+m)}}else{const i=this.toSeconds(t);h(i>0,"The duration must be greater than 0"),this.triggerRelease(e,a+i)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(e){const t=oe(e,["onsilence","context"]);return this.options=ie(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}const ae={class:"flex bg-color-base overflow-y-auto"},re={class:"flex justify-center items-center absolute w-[100vw] h-[100vh] bg-color-base opacity-0.5",id:"cortina"},ne={class:"flex justify-center items-center font-bold bg-color-base-alt color-primary text-6xl w-40 h-40 rounded-full loading-note"},ce={class:"flex flex-col h-screen items-center justify-around w-full p-5"},le={class:"text-5xl md:text-7xl mt-16 items-center color-primary font-semibold flex text-wrap"},ue={class:"flex flex-col gap-2"},de={class:"flex flex-col gap-10 items-center"},he=r("p",{class:"text-4xl color-primary"},"Alternativas",-1),ge={class:"flex gap-6 flex-wrap"},me=["onClick","id"],pe=r("div",{class:"flex bg-color-base-alt w-[60vw] h-3 mb-8 md:mb-2 rounded-full"},[r("div",{class:"bg-color-primary h-full rounded-full","data-js":"progress-bar"})],-1),Se={__name:"questions",setup(_e){const e=J();let t=[],s=[],o,a,i,u;t=M(JSON.parse(localStorage.getItem("notas"))),s=M(JSON.parse(localStorage.getItem("notasNomes"))),o=parseInt(localStorage.getItem("progresso")),a=parseInt(localStorage.getItem("quantidadeQuestoes")),i=localStorage.getItem("seguirQuestoes")=="true",u=localStorage.getItem("referencia")=="true";const m=()=>{e.push("/configurations")};let w,y,I,S;const C=()=>{w=Math.floor(Math.random()*localStorage.getItem("nNotas")),y=JSON.parse(localStorage.getItem("notas"))[w],I=Math.floor(Math.random()*3)+3,S=`${y}${I}`,localStorage.setItem("notaNome",y),console.log(S)};let p,N=0,_,V;const F=n=>{p=new g(k).toDestination(),p.triggerAttackRelease(n,"2n")},Q=()=>{p=new g(k).toDestination(),p.triggerAttackRelease("c4","2n")},T=()=>{V=(1-1/parseInt(localStorage.getItem("nNotas"))*N)*(100/a),console.log(V),_=parseFloat(localStorage.getItem("resultadoFinal")),_+=V,console.log(_),localStorage.setItem("resultadoFinal",_),o++,localStorage.setItem("progresso",o),o<=a?setTimeout(D,i?1500:0):setTimeout(P,i?1500:0)},D=()=>{location.reload(!0)},P=()=>{e.push("/results")},U=()=>{o==a&&(document.querySelector("#btnProximaQuestao").innerHTML="Ver resultado final"),document.querySelector("#btnProximaQuestao").classList.toggle("active-next")},$=n=>{localStorage.getItem("notaNome")==n?L(n):B(n)},L=n=>{document.querySelector("#"+n).classList.add("correto"),document.querySelectorAll('button[data-js="alternative-button"]').forEach(c=>{c.classList.contains("correto")||(c.disabled=!0)}),document.querySelector('[data-js="progress-bar"]').style.width=o/a*100+"%",i?T():U()},B=n=>{document.querySelector("#"+n).disabled=!0,document.querySelector("#"+n).classList.add("errado"),N++};return H(()=>{C(),document.querySelector('[data-js="progress-bar"]').style.width=(o-1)/a*100+"%"}),(n,c)=>{const q=G;return v(),f("div",ae,[r("div",re,[r("p",ne,[R(q,{name:"material-symbols:music-note"})])]),r("div",ce,[r("button",{type:"button",class:"bg-color-primary color-base p-2 text-4xl flex items-center gap-2 fixed left-[5vw] top-[5vh] rounded-md z-10",onClick:c[0]||(c[0]=l=>m())},[R(q,{name:"mynaui:config"})]),r("p",le," Questão "+A(d(o))+" de "+A(d(a)),1),r("div",ue,[d(u)?(v(),f("button",{key:0,class:"bg-color-primary color-base rounded-lg md:text-3xl text-2xl md:p-5 p-3",onClick:c[1]||(c[1]=l=>Q()),type:"button"},"Nota de referência")):K("",!0),r("button",{class:"bg-color-primary color-base rounded-lg md:text-3xl text-2xl md:p-5 p-3",onClick:c[2]||(c[2]=l=>F(d(S))),type:"button"},"Ouvir a questão")]),r("div",de,[he,r("div",ge,[(v(!0),f(W,null,X(d(t),(l,z)=>(v(),f("button",{type:"button",class:Y([[`bg-color-${l}`],"w-[75px] h-[75px] color-base rounded-lg text-xl"]),"data-js":"alternative-button",onClick:fe=>$(l),id:l,key:l},A(d(s)[z]),11,me))),128))])]),pe,r("button",{type:"button",onClick:c[3]||(c[3]=l=>T()),id:"btnProximaQuestao",class:"bg-color-primary color-base flex items-center gap-2 fixed right-[2vw] bottom-[-15vh] rounded-md md:text-2xl text-1xl md:p-4 p-2"}," Próxima questão ")])])}}};export{Se as default};
